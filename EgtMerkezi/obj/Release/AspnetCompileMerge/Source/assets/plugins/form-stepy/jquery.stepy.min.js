/*!
 * jQuery Stepy - A Wizard Plugin
 *
 * Licensed under The MIT License
 *
 * @version        1.1.0
 * @author         Washington Botelho
 * @documentation  wbotelhos.com/stepy
 *
 */

(function(d){var e={S:function(b){return this.k(function(){e.P.call(this);this.a=d.extend({},d.n.t.O,b);var a=this,c=d(this),f=c.b("id");if(void 0===f||""===f)f=e.G.call(a),c.b("id",f);a.a.e&&(jQuery.ga.da({q:a.a.q}),c.append('<div class="stepy-errors" />'));a.o=e.I.call(a);a.c=c.children("fieldset");a.c.k(function(b){e.C.call(a,this,b);e.B.call(a,this,b)});a.g=a.o.children("li");a.g.first().j("stepy-active");a.a.R&&e.w.call(a);a.a.X?a.g.click(function(){var b=a.g.filter(".stepy-active").b("id").split("-"),
b=parseInt(b[b.length-1],10),f=d(this).index();if(f>b){if(a.a.next&&!e.f.call(c,a.a.next,f))return!1}else if(f<b&&a.a.back&&!e.f.call(c,a.a.back,f))return!1;f!=b&&e.step.call(a,f+1)}):a.g.N("cursor","default");a.a.Q&&e.v.call(a);a.c.first().find(":input:visible:enabled").first().select().focus();c.data({settings:this.a,stepy:!0})})},v:function(){var b=this;b.c.Z('input[type="text"], input[type="password"]',"keypress",function(a){13==(a.keyCode?a.keyCode:a.which)&&(a.preventDefault(),a=d(this).Y("fieldset").find(".stepy-navigator"),
a.length&&(a=a.children(".button-next"),a.length?a.click():b.finish&&b.finish.click()))})},w:function(){var b=this,a=d(this),c=a.children('input[type="submit"]');b.finish=1===c.length?c:a.children(".btn .btn-succes .stepy-finish");if(b.finish.length){var f=a.r("form"),g=void 0;f&&b.a.finish&&(g=a.b("onsubmit"),a.b("onsubmit","return false;"));b.finish.s("click.stepy",function(c){b.a.finish&&!e.f.call(a,b.a.finish,b.c.length-1)?c.preventDefault():f&&(g?a.b("onsubmit",g):a.ca("onsubmit"),"submit"===
b.finish.b("type")||b.a.e&&!e.e.call(a,b.c.length-1)||a.submit())});b.c.T().children(".stepy-navigator").append(b.finish)}else d.error('Submit button or element with class "stepy-finish" missing!')},A:function(b,a){var c=this;d(this);d("<a />",{href:"#","class":"btn btn-default",h:c.a.L}).s("click.stepy",function(b){b.preventDefault();c.a.back&&!e.f.call(c,c.a.back,a-1)||e.step.call(c,a-1+1)}).i(b)},B:function(b,a){var c=e.J.call(this).i(b);0===a?1<this.c.length&&e.l.call(this,c,a):(d(b).p(),e.A.call(this,
c,a),a<this.c.length-1&&e.l.call(this,c,a))},C:function(b,a){b=d(b).b("id",d(this).b("id")+"-step-"+a).j("stepy-step");var c=e.H.call(this,a);c.append(e.K.call(this,b));this.a.description&&c.append(e.D.call(this,b));this.o.append(c)},l:function(b,a){var c=this,f=d(this);d("<a/>",{href:"#","class":"btn btn-primary",h:c.a.V}).s("click.stepy",function(b){b.preventDefault();c.a.next&&!e.f.call(f,c.a.next,a+1)||e.step.call(c,a+1+1)}).i(b)},D:function(b){b=b.children("legend");this.a.U||b.p();if(b.length)return d("<span />",
{h:b.h()});e.F.call(this,"<legend /> element missing!")},F:function(b){d(this).h(b);d.error(b)},f:function(b,a){var c=b.call(this,a+1);return c||void 0===c},G:function(){return this.hash="stepy-"+Math.random().toString().substring(2)},H:function(b){return d("<li />",{id:d(this).b("id")+"-head-"+b})},I:function(){var b=d("<ul />",{id:d(this).b("id")+"-header","class":"stepy-header"});this.a.u?b.i(this.a.u):b.insertBefore(this);return b},J:function(){return d('<div class="stepy-navigator panel-footer" />')},
K:function(b){return d("<div />",{h:b.b("title")||"--"})},P:function(){return d(this).k(function(){var b=d(this);if(b.data("stepy")){var a=b.data("stepy",!1).children("fieldset").N("display","");b.children(".stepy-errors").remove();this.finish.i(a.T());a.find(".stepy-navigator").remove()}})},step:function(b){that=d(this);opt=that[0].a;b--;var a=that.children("fieldset");b>a.length-1&&(b=a.length-1);var c=b;if(opt.e)for(var f=!0,g=0;g<b;g++)if(f&=e.e.call(this,g),opt.M&&!f){c=g;break}var h=a.length;
"fade"==opt.transition?a.aa(opt.duration,function(){0<--h||a.d(c).$(opt.duration)}):"slide"==opt.transition?a.fa(opt.duration,function(){0<--h||a.d(c).ea(opt.duration)}):a.p(opt.duration).d(c).show(opt.duration);that[0].g.W("stepy-active").d(c).j("stepy-active");that.r("form")&&(f=void 0,f=c==b?a.d(c).find(":input:enabled:visible"):a.d(c).find(".error").select().focus(),f.first().select().focus());opt.select&&opt.select.call(this,c+1);return that},e:function(b){var a=d(this);if(!a.r("form"))return!0;
var c=this,e=a.children("fieldset").d(b),g=!0,h=d("#"+a.b("id")+"-header").children().d(b),k=a.e();d(e.find(":input:enabled").get().reverse()).k(function(){var a=k.element(d(this));void 0===a&&(a=!0);(g&=a)?c.a.m&&h.W("stepy-error"):(c.a.m&&h.j("stepy-error"),k.ba())});return g}};d.n.t=function(b){if(e[b])return e[b].apply(this,Array.prototype.slice.call(arguments,1));if("object"!==typeof b&&b)d.error("Method "+b+" does not exist!");else return e.S.apply(this,arguments)};d.n.t.O={back:void 0,L:'<i class="fa fa-long-arrow-left"></i> Back',
M:!1,description:!0,duration:void 0,Q:!0,m:!1,finish:void 0,R:!0,q:"",U:!0,next:void 0,V:'Next <i class="fa fa-long-arrow-right"></i>',select:void 0,X:!1,u:void 0,transition:void 0,e:!1}})(jQuery);
